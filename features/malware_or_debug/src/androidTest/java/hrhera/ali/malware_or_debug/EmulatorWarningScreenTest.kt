package hrhera.ali.malware_or_debug

import androidx.activity.ComponentActivity
import androidx.compose.ui.test.*
import androidx.compose.ui.test.junit4.createAndroidComposeRule
import hrhera.ali.malware_or_debug.components.EmulatorWarningScreen
import org.junit.Rule
import org.junit.Test

class EmulatorWarningScreenTest {

    @get:Rule
    val composeTestRule = createAndroidComposeRule<ComponentActivity>()

    @Test
    fun emulatorWarningScreen_displaysAllElements() {
        val secondsLeft = 10

        composeTestRule.setContent {
            EmulatorWarningScreen(secondsLeft = secondsLeft)
        }
        composeTestRule.onNodeWithText("Emulator/Debug Mode Detected").assertIsDisplayed()
        composeTestRule.onNodeWithText("This application cannot run in emulator or on rooted/debug devices")
            .assertIsDisplayed()
        composeTestRule.onNodeWithText("Redirecting in").assertIsDisplayed()
        composeTestRule.onNodeWithText(secondsLeft.toString()).assertIsDisplayed()
        composeTestRule.onNodeWithContentDescription("Warning Icon").assertIsDisplayed()
    }
}
